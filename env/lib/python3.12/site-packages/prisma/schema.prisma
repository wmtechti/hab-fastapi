generator client {
  provider             = "prisma-client-py"
  recursive_type_depth = "5"
  interface            = "sync"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?

  stripeCustomerId         String?
  stripeSubscriptionId     String?
  stripeSubscriptionStatus String?
  stripePriceId            String?

  accounts      Account[]
  sessions      Session[]
  todos          Todo[]

  userType               UserType[]

  profiles               Profile[]
  gyms                   Gym[]    @relation("GymUsers")
  responsibleGyms        Gym[]    @relation("GymResponsible")
  isResponsibleForBilling Boolean @default(false)  

  questionarioProntidaoAvaliacaoFisica QuestionarioProntidaoAvaliacaoFisica[]
  formularioAvaliacaoFisica FormularioAvaliacaoFisica[]
  registros RegistraTreino[]  
}

//---------------------------------------------------------
// específico para ACADEMIA
model Profile {
  id        String    @id @default(cuid())
  role      Role     @relation(fields: [roleId], references: [id])
  roleId    String
  user      User     @relation(fields: [userId], references: [id])
  userId    String
}

model Role {
  id        String    @id @default(cuid())
  name      String
  profiles  Profile[]
}

model Gym {
  id            String    @id @default(cuid())
  name          String
  location      String
  users         User[] @relation("GymUsers")
  responsibleId String?
  responsible   User?  @relation("GymResponsible", fields: [responsibleId], references: [id])
}

model UserType {
  id            String    @id @default(cuid())
  perfil        String
  user      User     @relation(fields: [userId], references: [id])
  userId    String
}
// exemplos de perfis para a tabela UserType
//  ACADEMIA
//  PERSONAL
//  NUTRICIONISTA
//  ALUNO
// observação: existe também o responsável pelo pagamento da assinatura, mas está na tabela user
//---------------------------------------------------------

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user            User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model Todo {
  id        String   @id @default(cuid())
  title     String

  userId    String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user      User     @relation(fields: [userId], references: [id])

  doneAt    DateTime?
}

model QuestionarioProntidaoAvaliacaoFisica {
  id                                          String      @id @default(cuid())
  aluno                                       String
  userId    String
  user      User     @relation(fields: [userId], references: [id]) 
  sexo                                        String
  treinador                                   String
  dataNascimento                              String
  Objetivo                                    String
  tempoTreinamentoIninterruptoAtual           String
  tempoDestreinamento                         String
  experienciaPreviaTreinamento                String
  frequenciaMusculacao                        String
  modalidadeExtra                             String
  frequenciaModalidadeExtra                   String
  altura                                      Float
  peso                                        Float
  torax                                       Float
  cintura                                     Float
  abdomen                                     Float
  quadril                                     Float
  braco_d                                     Float
  braco_e                                     Float
  coxa_d                                      Float
  coxa_e                                      Float
  panturrilha_d                               Float
  panturrilha_e                               Float
  medidaMao                                   Float
  mobilidadeGlenoumeralDireita                Float
  mobilidadeGlenoumeralEsquerda               Float
  AmplitudeMovimentoQuadrilDireito            Float
  AmplitudeMovimentoQuadrilEsquerdo           Float
  AmplitudeMovimentoTornozeloDireito          Float
  AmplitudeMovimentoTornozeloEsquerdo         Float
  pranchaVentral                              Float
  extensaoColuna                              Float
  pranchaLateralDireita                       Float
  pranchaLateralEsquerda                      Float
  squatJump1                                  Float
  squatJump2                                  Float
  squatJump3                                  Float
  RMagachamento                               Float
  RMsupino                                    Float
  RMterra                                     Float
  RMbarraFixa                                 Float
  VelocidadeAerobiaMaxima                     Float
  bracoDireito                                Float
  bracoEsquerdo                               Float
  coxaDireita                                 Float
  coxaEsquerda                                Float
  panturrilhaDireita                          Float
  panturrilhaEsquerda                         Float
  idade                                       Int
  data                                        String
  hora                                        String
  pontuacaoTempoTreinoAtual                   Int
  pontuacao_tempo_de_destreinamento_atual     Int
  pontuacao_experiencia_previa_de_treinamento Int
  pontuacao_media_nivel_treinamento           Float
  status_de_treinamento                       String
  nivel_mob_torn_direito                      String
  nivel_mob_torn_esquerdo                     String
  nivel_mob_quadril_direito                   String
  nivel_mob_quadril_esquerdo                  String
  nivel_mob_omb_direito                       String
  nivel_mob_omb_esquerdo                      String
  nivelPranchaVentral                         String
  nivelExtensaoColuna                         String
  nivelPranchaLateralDireita                  String
  nivelPranchaLateralEsquerda                 String
  pontosPranchaVentral                        Float
  pontosExtensaoColuna                        Float
  pontosPranchaLateralDireita                 Float
  pontosPranchaLateralEsquerda                Float
  forcaRelativaAgachamento                    Float
  forcaRelativaSupino                         Float
  forcaRelativaTerra                          Float
  forcaRelativaBarraFixa                      Float
  squat_nivel                                 String
  supino_nivel                                String
  terra_nivel                                 String
  pontuacao_squat_nivel                       Float
  pontuacao_supino_nivel                      Float
  pontuacao_terra_nivel                       Float
  media_squat_jump                            Float
  vo2_estimado                                Float
  faixa_etaria                                String
  nivel_vo2                                   String
  IMC                                         Float
  ClassificacaoIMC                            String
  idtagaluno                                  String
}

model FormularioAvaliacaoFisica {
  id                                          String      @id @default(cuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id])   
  aluno                                       String
  treinador                                   String
  diaTreino                                   String
  modalidadeTreino                            String
  diaTreinoExtra                              String
  modalidadeTreinoExtra                       String
  altura                                      Float
  peso                                        Float
  torax                                       Float
  cintura                                     Float
  abdomen                                     Float
  quadril                                     Float
  braco_d                                     Float
  braco_e                                     Float
  coxa_d                                      Float
  coxa_e                                      Float
  panturrilha_d                               Float
  panturrilha_e                               Float
  medidaMao                                   Float
  mobilidadeGlenoumeralDireita                Float
  mobilidadeGlenoumeralEsquerda               Float
  AmplitudeMovimentoQuadrilDireito            Float
  AmplitudeMovimentoQuadrilEsquerdo           Float
  AmplitudeMovimentoTornozeloDireito          Float
  AmplitudeMovimentoTornozeloEsquerdo         Float
  pranchaVentral                              Float
  extensaoColuna                              Float
  pranchaLateralDireita                       Float
  pranchaLateralEsquerda                      Float
  squatJump1                                  Float
  squatJump2                                  Float
  squatJump3                                  Float
  RMagachamento                               Float
  RMsupino                                    Float
  RMterra                                     Float
  RMbarraFixa                                 Float
  VelocidadeAerobiaMaxima                     Float
  bracoDireito                                Float
  bracoEsquerdo                               Float
  coxaDireita                                 Float
  coxaEsquerda                                Float
  panturrilhaDireita                          Float
  panturrilhaEsquerda                         Float
  idade                                       Int
  data                                        String
  hora                                        String
  pontuacaoTempoTreinoAtual                   Int
  pontuacao_tempo_de_destreinamento_atual     Int
  pontuacao_experiencia_previa_de_treinamento Int
  pontuacao_media_nivel_treinamento           Float
  status_de_treinamento                       String
  nivel_mob_torn_direito                      String
  nivel_mob_torn_esquerdo                     String
  nivel_mob_quadril_direito                   String
  nivel_mob_quadril_esquerdo                  String
  nivel_mob_omb_direito                       String
  nivel_mob_omb_esquerdo                      String
  nivelPranchaVentral                         String
  nivelExtensaoColuna                         String
  nivelPranchaLateralDireita                  String
  nivelPranchaLateralEsquerda                 String
  pontosPranchaVentral                        Float
  pontosExtensaoColuna                        Float
  pontosPranchaLateralDireita                 Float
  pontosPranchaLateralEsquerda                Float
  forcaRelativaAgachamento                    Float
  forcaRelativaSupino                         Float
  forcaRelativaTerra                          Float
  forcaRelativaBarraFixa                      Float
  squat_nivel                                 String
  supino_nivel                                String
  terra_nivel                                 String
  pontuacao_squat_nivel                       Float
  pontuacao_supino_nivel                      Float
  pontuacao_terra_nivel                       Float
  media_squat_jump                            Float
  vo2_estimado                                Float
  faixa_etaria                                String
  nivel_vo2                                   String
  IMC                                         Float
  ClassificacaoIMC                            String
}

model Treino {
  id String      @id @default(cuid())
  nome String 
}

model RegistraTreino {
  id String @id @default(cuid())
  cdTipodeTreino String
  cdTreino String
  userId String
  user User @relation(fields: [userId], references: [id])
  dataHoraRegistroInterno String
  dataHoraRegistroPeloUser String
  treinoId String
  escalacomosesente Int
  escaladisposicaoantesdasecao Int
  estadocontroleinterno Int
  logdoprocessoderegistro String
}

